/* 모달 헤더 통일 및 X 버튼 영역 정렬 */

/* 모든 모달의 상단 여백 통일 */
.modal,
.unified-modal,
.backup-modal,
.sync-modal,
.drive-modal,
.storage-modal {
    padding: 20px !important;
    margin: 0 !important;
    box-sizing: border-box !important;
}

/* 모달 다이얼로그 위치 - 화면 중앙 정렬 */
.modal-dialog,
.modal .modal-dialog,
.unified-modal .modal-dialog {
    position: fixed !important;
    top: 50% !important;
    left: 50% !important;
    transform: translate(-50%, -50%) !important;
    margin: 0 !important;
    padding: 0 !important;
    z-index: 1050 !important;
}

/* 모달 컨텐츠 상단 정렬 */
.modal-content,
.modal .modal-content {
    margin-top: 0 !important;
    border-radius: 16px !important;
    overflow: visible !important;
}

/* 모든 모달 헤더 통일 */
.modal-header,
.modal .modal-header {
    height: 64px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    padding: 0 24px !important;
    border-radius: 16px 16px 0 0 !important;
    position: relative !important;
}

/* X 버튼 영역 통일 및 정렬 - 가려짐 완전 방지 */
.modal-close,
.modal .modal-close,
.modal-header .modal-close,
.modal-header .close,
.modal-header button.close,
.modal-header button[aria-label="Close"],
.btn-close {
    position: absolute !important;
    top: 50% !important;
    right: -10px !important;
    transform: translateY(-50%) translateX(-50%) !important;
    width: 44px !important;
    height: 44px !important;
    border-radius: 50% !important;
    background: rgba(255, 255, 255, 0.9) !important;
    border: 3px solid rgba(255, 255, 255, 1) !important;
    color: #333 !important;
    font-size: 24px !important;
    font-weight: 600 !important;
    line-height: 1 !important;
    cursor: pointer !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    transition: all 0.3s ease !important;
    z-index: 9999 !important;
    padding: 0 !important;
    margin: 0 !important;
    opacity: 1 !important;
    min-width: 44px !important;
    min-height: 44px !important;
    box-sizing: border-box !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15) !important;
}

/* X 버튼 내용 통일 */
.modal-close::before,
.modal .modal-close::before,
.modal-header .close::before,
.modal-header button.close::before {
    content: '×' !important;
    font-size: 28px !important;
    line-height: 1 !important;
    display: block !important;
}

/* 기존 X 표시 제거 (중복 방지) */
.modal-close span,
.modal .modal-close span,
.modal-header .close span,
.modal-header button.close span {
    display: none !important;
}

/* X 버튼 호버 효과 통일 */
.modal-close:hover,
.modal .modal-close:hover,
.modal-header .close:hover,
.modal-header button.close:hover {
    background: rgba(255, 0, 0, 0.8) !important;
    border-color: rgba(255, 0, 0, 1) !important;
    transform: translateY(-50%) translateX(-50%) rotate(90deg) scale(1.1) !important;
    color: white !important;
    box-shadow: 0 4px 15px rgba(255, 0, 0, 0.3) !important;
}

/* X 버튼 포커스 스타일 제거 */
.modal-close:focus,
.modal .modal-close:focus,
.modal-header .close:focus,
.modal-header button.close:focus {
    outline: none !important;
    box-shadow: none !important;
}

/* 모달 제목 위치 조정 (X 버튼과 겹치지 않게) */
.modal-title,
.modal .modal-title,
.modal-header .modal-title {
    margin: 0 !important;
    padding-right: 40px !important;
    flex: 1 !important;
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
    max-width: calc(100% - 60px) !important;
    overflow: visible !important;
    text-overflow: clip !important;
    white-space: nowrap !important;
}

/* 특정 모달별 헤더 높이 보정 */
#excelModal .modal-header,
#settingsModal .modal-header,
#storageModal .modal-header,
#backupModal .modal-header,
#unifiedCloudModal .modal-header,
#cloudModal .modal-header,
#memoModal .modal-header,
#dateMemoModal .modal-header,
#memoDetailModal .modal-header,
#createModal .modal-header {
    height: 64px !important;
}

/* 동적으로 생성되는 모달 스타일 */
.unified-modal,
.drive-modal,
.sync-modal {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
    background: rgba(0, 0, 0, 0.6) !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    z-index: 9999 !important;
}

.unified-modal .modal-content,
.drive-modal .modal-content,
.sync-modal .modal-content {
    position: relative !important;
    background: white !important;
    border-radius: 16px !important;
    max-width: 680px !important;
    width: 90% !important;
    margin: 0 !important;
    max-height: 90vh !important;
    overflow-y: auto !important;
}

/* 동적 모달 헤더 */
.unified-modal .modal-header,
.drive-modal .modal-header,
.sync-modal .modal-header {
    background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%) !important;
    color: white !important;
    height: 64px !important;
    padding: 0 20px !important;
    border-radius: 16px 16px 0 0 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    position: relative !important;
}

/* 동적 모달 X 버튼 */
.unified-modal .modal-close,
.drive-modal .modal-close,
.sync-modal .modal-close {
    position: absolute !important;
    top: 50% !important;
    right: -10px !important;
    transform: translateY(-50%) translateX(-50%) !important;
    width: 44px !important;
    height: 44px !important;
    z-index: 9999 !important;
    background: rgba(255, 255, 255, 0.9) !important;
    border: 3px solid rgba(255, 255, 255, 1) !important;
    color: #333 !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15) !important;
}

/* 동적 모달 제목 여백 */
.unified-modal .modal-title,
.drive-modal .modal-title,
.sync-modal .modal-title {
    padding-right: 40px !important;
    max-width: calc(100% - 60px) !important;
}

/* 클라우드 버튼 클릭 문제 해결 */
#unifiedCloudBtn {
    z-index: 1 !important;
    pointer-events: auto !important;
    cursor: pointer !important;
    position: relative !important;
}

#unifiedCloudBtn:hover {
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
}

/* 클라우드 버튼 활성화 상태 */
#unifiedCloudBtn:active {
    transform: translateY(0) !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
}

/* 오버레이 z-index 조정 */
.modal-backdrop {
    z-index: 1040 !important;
}

.modal {
    z-index: 1050 !important;
}

.unified-modal,
.drive-modal,
.sync-modal {
    z-index: 9999 !important;
}

/* 반응형 디자인 - 모바일 */
@media (max-width: 576px) {
    .modal-dialog,
    .modal .modal-dialog {
        position: fixed !important;
        top: 50% !important;
        left: 50% !important;
        transform: translate(-50%, -50%) !important;
        margin: 0 !important;
        width: 95% !important;
        max-width: none !important;
    }
    
    .unified-modal .modal-content,
    .drive-modal .modal-content,
    .sync-modal .modal-content {
        width: 95% !important;
        max-height: 85vh !important;
    }
    
    .modal-header,
    .modal .modal-header {
        height: 56px !important;
        padding: 0 16px !important;
    }
    
    .modal {
        padding: 15px !important;
    }
    
    .modal-close,
    .modal .modal-close {
        width: 40px !important;
        height: 40px !important;
        right: -8px !important;
        transform: translateY(-50%) translateX(-50%) !important;
        min-width: 40px !important;
        min-height: 40px !important;
    }
    
    .modal-close::before,
    .modal .modal-close::before {
        font-size: 22px !important;
    }
    
    .modal-title,
    .modal .modal-title {
        font-size: 16px !important;
        padding-right: 30px !important;
        max-width: calc(100% - 50px) !important;
    }
}

/* 모달 오픈 애니메이션 */
@keyframes modalFadeIn {
    from {
        opacity: 0;
        transform: translateY(-20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.modal.show .modal-dialog {
    animation: modalFadeIn 0.3s ease-out !important;
}

/* 백업 모달 특별 처리 */
#backupModal .modal-content,
.backup-modal .modal-content {
    margin-top: 0 !important;
    overflow: hidden !important;
}

/* 스크롤바 스타일링 */
.modal-body::-webkit-scrollbar {
    width: 8px !important;
}

.modal-body::-webkit-scrollbar-track {
    background: #f1f1f1 !important;
    border-radius: 4px !important;
}

.modal-body::-webkit-scrollbar-thumb {
    background: #888 !important;
    border-radius: 4px !important;
}

.modal-body::-webkit-scrollbar-thumb:hover {
    background: #555 !important;
}